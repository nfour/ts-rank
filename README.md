# ts-rank

A way to visualize which files & types are hurting your TypeScript project compilation time.

+ [Usage](#usage)

## Usage

These 1-liners should work in most TypeScript projects:

```bash
npm run tsc --noEmit  --generateTrace .tsTrace && npx ts-rank

# Or for when using incremental builds:

npm run tsc --noEmit --generateTrace .tsTrace --incremental false --tsBuildInfoFile null && npx ts-rank
```

Will output something like this:

```
# 2        705.05 ms (Total time)

  201 ms   StyledComponentBase            ./node_modules/@types/styled-components/index.d.ts:167:133
  138 ms   StyledComponentProps           ./node_modules/@types/styled-components/index.d.ts:59:9
  115 ms   StyledComponentProps           ./node_modules/@types/styled-components/index.d.ts:59:9
  26 ms    StyledComponentBase            ./node_modules/@types/styled-components/index.d.ts:167:133
  8 ms     StyledComponent                ./node_modules/@types/styled-components/index.d.ts:158:38
  8 ms     StyledComponentBase            ./node_modules/@types/styled-components/index.d.ts:167:133
  8 ms     StyledComponentProps           ./node_modules/@types/styled-components/index.d.ts:59:9
  7 ms     ReactDefaultizedProps          ./node_modules/@types/styled-components/index.d.ts:55:13
  7 ms     Defaultize                     ./node_modules/@types/styled-components/index.d.ts:44:65
  7 ms     StyledComponentBase            ./node_modules/@types/styled-components/index.d.ts:167:133

# 1        757.79 ms (Total time)

  22 ms    IModelType                     ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:79:2
  21 ms    named                          ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:81:32
  20 ms    named                          ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:81:32
  14 ms    IModelType                     ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:79:2
  13 ms    named                          ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:81:32
  13 ms    IModelType                     ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:79:2
  12 ms    named                          ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:81:32
  11 ms    IModelType                     ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:79:2
  10 ms    ModelInstanceType              ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:70:20
  9 ms     IModelType                     ./node_modules/mobx-state-tree/dist/types/complex-types/model.d.ts:79:2
```

Further usage:

```bash
# Get help info
npx ts-rank --help

# Provide location to the trace files generated by generateTrace
npx ts-rank --TRACE_FILE trace/trace.json --TYPES_FILE trace/types.json

# Use --pattern as a glob to filter rankings based on file path
npx ts-rank --PATTERN "**/someFolder/**"  
```

Package json scripts:

```json
{
  "scripts": {
    "trace": "tsc --noEmit --generateTrace .tsTrace && npx ts-rank",
    "trace:full": "tsc --noEmit --incremental false --tsBuildInfoFile null --generateTrace .tsTrace && npx ts-rank",
  }
}
```